(function(a,b,c){b.extend(c,{subTabClick:function(k){var j=b(k.target).closest("li"),h=c,l=b("#movieInfo"),f=j.attr("rel"),g=h.postData,i,d;if(!j[0]||j.hasClass("active")){return}j.siblings().removeClass("active");j.addClass("active");if(f=="#subPart1"){try{i="http://piao.163.com/"+c.curCity.spell+"/movie/"+c.movieId+".html?buyseat";neteaseTracker(true,i,"在线选座",null)}catch(k){}b("#subPart2").hide()}else{try{d="http://piao.163.com/"+c.curCity.spell+"/movie/"+c.movieId+".html?buycoupon";neteaseTracker(true,d,"在线选座",null)}catch(k){}b("#subPart1").hide()}b(f).show();h.getPost()},overTable:function(){b("body").delegate(".movieTbodyAct tr","mouseenter",function(){b(this).addClass("active")}).delegate(".movieTbodyAct tr","mouseleave",function(){b(this).removeClass("active")})},dmFilterClick:function(i){var h=b(i.target),g=b(this),f=g.closest("table"),d=c;if(h[0].tagName.toUpperCase()=="A"){d.dmFilterEv(h.parent())}else{if(!f.attr("hasGetFilter")){d.getDmFilterList(g.closest("table"));f.attr("hasGetFilter",true)}}if(g.hasClass("active")){g.removeClass("active")}else{g.addClass("active");if(g.attr("isDocClick")){return}g.attr("isDocClick",true);a.setTimeout(function(){b(document.body).bind("click",function(k){var j=b(k.target),l=j.closest(".copy");if(l.length){return false}else{g.removeClass("active")}})},100)}i.stopPropagation()},dmFilterEv:function(f){var g=f.attr("val"),d=f.closest("table").find("tbody"),e=d.find("tr[dm]");if(g=="-1"){e.removeClass("hide")}else{e.each(function(){var h=b(this);if(h.attr("dm").toLowerCase()==g.toLowerCase()){h.removeClass("hide")}else{h.addClass("hide")}})}},uniqueArr:function(d){var e=[],h=d.length,f=0,g={};for(;f<h;f++){if(!g[d[f]]){e.push(d[f]);g[d[f]]=true}}return e},filterList:[],dmTypeMap:{imax:"mtype_imax","2d":"mtype_2d","3d":"mtype_3d","4d":"mtype_4d","数字":"mtype_num","胶片":"mtype_jp"},getDmFilterList:function(h){var j=this.getListFromTbl(h);if(j&&j.length){j=c.uniqueArr(j);j.sort();var e=j.length,g=['<li val="-1"><a href="javascript:;">全部</a></li>'];for(var f=0;f<e;f++){var d=j[f];g[f+1]='<li val="'+d.toLowerCase()+'"><a href="javascript:;">'+d+"</a></li>"}h.find(".sel_copy").html(g.join(""))}},getListFromTbl:function(d){var e=[];d.find("tr").each(function(){var f=b(this).attr("dm");f&&e.push(f)});return e}})})(window,jQuery,Core);
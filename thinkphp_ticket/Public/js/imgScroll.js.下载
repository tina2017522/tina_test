(function(a){a.imgScroll=function(e){var c=a.extend({showType:0,isLoop:false,autoScroll:false,autoAgainTimeSpan:3000,delayTime:3000,duration:300,imgBigList:null,imgSmallList:null,barList:null,leftBtn:null,rightBtn:null,eventType:"mouseover",onChange:null,onInit:null},e);var x=c.imgBigList.find("li"),t=0,l=0,g=0,o=x.length,w=x.first().outerWidth(true),f=x.first().outerHeight(),j=false,r=new Date();if(c.showType!=1){c.imgBigList.addClass("photo_b_list_fixed").find("li:first").addClass("active")}if(!!c.imgSmallList){var b=c.imgSmallList.find("li:first").outerWidth(true),y=c.imgSmallList.find("li").length,n=Math.floor(c.imgSmallList.parent().width()/b)}else{if(!c.barList){var d=a('<div class="photo_bar_list"></div>');for(var v=0;v<o;v++){d.append('<a href="javascript:;" index="'+v+'"></a>')}d.find("a:first").addClass("active");c.imgBigList.after(d);c.barList=d}}if(c.autoScroll&&o>1){function h(){var i=setInterval(function(){if(j){clearInterval(i);s();return false}u(-1)},c.delayTime)}h();function s(){var i=setInterval(function(){var z=new Date();if(z-r>=c.autoAgainTimeSpan){j=false;clearInterval(i);h()}},1000)}}if(!!c.imgSmallList){c.imgSmallList.find("li").bind(c.eventType,function(i){if(a(this).hasClass("active")){return}u(0,a(this).index(),true)})}if(!!c.barList){c.barList.find("a").first().addClass("active");c.barList.find("a").bind(c.eventType,function(i){if(a(this).hasClass("active")){return}u(0,c.barList.find("a").index(this),true)})}if(!!c.leftBtn){c.leftBtn.click(function(){u(1,true)})}if(!!c.rightBtn){c.rightBtn.click(function(){u(-1,true)})}!!c.onInit&&c.Init();var u=function(A,i,z){if(t){return}t=1;if(typeof i=="boolean"){z=i;i=undefined}if(c.autoScroll&&z){j=true;r=new Date()}var B=c.showType;if(B==0){k(A,i)}else{if(B==1){m(A,i)}else{if(B==2){p(A,i)}else{if(B==3){q(A,i)}}}}},k=function(A,z){g=l;if(z>=0){l=z;A=0}if(A<0){if(l>=o-1){l=-1}++l}else{if(A>0){if(l<=0){l=o}--l}}if(!!c.imgSmallList){c.imgSmallList.find(">.active").removeClass("active");c.imgSmallList.find("li").eq(l).addClass("active")}if(!!c.barList){c.barList.find(">.active").removeClass("active");c.barList.find("a").eq(l).addClass("active")}var i=c.imgBigList.find("li");i.eq(g).stop(true,true).attr("class","preImg");i.eq(l).addClass("active").css({opacity:0.2}).animate({opacity:1},c.duration,function(){i.removeClass("preImg");!!c.onChange&&c.onChange(l)});t=0},m=function(B,A){if(A>=0){l=A;B=0}if(B<0){if(l>=o-1){if(c.isLoop){c.imgBigList.append(x.first().clone())}else{l=-1}}++l}else{if(B>0){if(l<=0){if(c.isLoop){c.imgBigList.prepend(x.last().clone());c.imgBigList.css({"margin-left":-w})}else{if(l<=0){l=o}}}--l}}var z=-(l*w);if(l<0){z=0}var i=l;if(c.isLoop&&B!=0){if(i>(o-1)){i=0}else{if(i<0){i=o-1}}}if(!!c.imgSmallList){c.imgSmallList.find(">.active").removeClass("active");c.imgSmallList.find("li").eq(i).addClass("active")}if(!!c.barList){c.barList.find(">.active").removeClass("active");c.barList.find("a").eq(i).addClass("active")}c.imgBigList.stop(true,true).animate({"margin-left":z},c.duration,function(){var C=l;if(c.isLoop&&B!=0){if(C>(o-1)){l=0;c.imgBigList.css({"margin-left":0});c.imgBigList.find("li:last").remove()}if(C<0){l=o-1;c.imgBigList.find("li:first").remove();c.imgBigList.css({"margin-left":-(l*w)})}}!!c.onChange&&c.onChange(l)});t=0},q=function(A,z){if(z>=0){l=z;A=0}if(A<0){if(l>=o-1){if(c.isLoop){c.imgBigList.append(x.first().clone())}else{l=-1}}++l}else{if(A>0){if(l<=0){if(c.isLoop){c.imgBigList.prepend(x.last().clone());c.imgBigList.css({"margin-top":-f})}else{if(l<=0){l=o}}}--l}}var B=-(l*f);if(l<0){B=0}var i=l;if(c.isLoop&&A!=0){if(i>(o-1)){i=0}else{if(i<0){i=o-1}}}if(!!c.imgSmallList){c.imgSmallList.find(">.active").removeClass("active");c.imgSmallList.find("li").eq(i).addClass("active")}if(!!c.barList){c.barList.find(">.active").removeClass("active");c.barList.find("a").eq(i).addClass("active")}c.imgBigList.stop(true,true).animate({"margin-top":B},c.duration,function(){var C=l;if(c.isLoop&&A!=0){if(C>(o-1)){l=0;c.imgBigList.css({"margin-top":0});c.imgBigList.find("li:last").remove()}if(C<0){l=o-1;c.imgBigList.find("li:first").remove();c.imgBigList.css({"margin-top":-(l*f)})}}!!c.onChange&&c.onChange(l)});t=0},p=function(A,z){g=l;if(z>=0){l=z;A=0}if(A<0){if(l>=o-1){l=-1}++l}else{if(A>0){if(l<=0){l=o}--l}}if(!!c.imgSmallList){c.imgSmallList.find(">.active").removeClass("active");c.imgSmallList.find("li").eq(l).addClass("active")}if(!!c.barList){c.barList.find(">.active").removeClass("active");c.barList.find("a").eq(l).addClass("active")}var i=c.imgBigList.find("li");i.eq(g).attr("class","");i.eq(l).addClass("active scale origin"+Math.floor(Math.random()*5));!!c.onChange&&c.onChange(l);t=0}}})(jQuery);